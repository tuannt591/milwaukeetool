{"version":3,"sources":["../src/Configuration.js"],"names":["Configuration","options","server","nodes","applicationId","host","routing_key","port","path","protocol","cacheSearchResultsForSeconds","additionalSearchParameters","queryBy","sortBy","highlightFullFields","geoLocationField","collectionSpecificSearchParameters","Object","keys","forEach","collection","overrideHighlightFullFields","length","values","some","c","Error"],"mappings":"AAAA;;;;;;;;;;;;;IAEaA,a;AACX,2BAA0B;AAAA;;AAAA,QAAdC,OAAc,uEAAJ,EAAI;AAAA;AACxB,SAAKC,MAAL,GAAcD,OAAO,CAACC,MAAR,IAAkB;AAC9BC,MAAAA,KAAK,EAAE,CACL;AACEC,QAAAA,aAAa,EAAE,EADjB;AAEEC,QAAAA,IAAI,EAAE,WAFR;AAGEC,QAAAA,WAAW,EAAE,EAHf;AAIEC,QAAAA,IAAI,EAAE,IAJR;AAKEC,QAAAA,IAAI,EAAE,EALR;AAMEC,QAAAA,QAAQ,EAAE;AANZ,OADK;AADuB,KAAhC;AAaA,SAAKP,MAAL,CAAYQ,4BAAZ,GACE,KAAKR,MAAL,CAAYQ,4BAAZ,IAA4C,IAA5C,GAAmD,IAAI,EAAvD,GAA4D,KAAKR,MAAL,CAAYQ,4BAD1E;AAGA,SAAKC,0BAAL,GAAkCV,OAAO,CAACU,0BAAR,IAAsC,EAAxE;AAEA,SAAKA,0BAAL,CAAgCC,OAAhC,GAA0C,KAAKD,0BAAL,CAAgCC,OAAhC,IAA2C,EAArF;AAEA,SAAKD,0BAAL,CAAgCE,MAAhC,GAAyC,KAAKF,0BAAL,CAAgCE,MAAhC,IAA0C,EAAnF;AAEA,SAAKF,0BAAL,CAAgCG,mBAAhC,GACE,KAAKH,0BAAL,CAAgCG,mBAAhC,IAAuD,KAAKH,0BAAL,CAAgCC,OADzF;AAGA,SAAKG,gBAAL,GAAwBd,OAAO,CAACc,gBAAR,IAA4B,SAApD;AAEA,SAAKC,kCAAL,GAA0Cf,OAAO,CAACe,kCAAR,IAA8C,EAAxF;AAEAC,IAAAA,MAAM,CAACC,IAAP,CAAY,KAAKF,kCAAjB,EAAqDG,OAArD,CAA6D,UAACC,UAAD,EAAgB;AAC3E,UAAMC,2BAA2B,GAC/B,KAAI,CAACL,kCAAL,CAAwCI,UAAxC,EAAoDN,mBAApD,IACA,KAAI,CAACE,kCAAL,CAAwCI,UAAxC,EAAoDR,OAFtD;;AAGA,UAAIS,2BAAJ,EAAiC;AAC/B,QAAA,KAAI,CAACL,kCAAL,CAAwCI,UAAxC,EAAoDN,mBAApD,GAA0EO,2BAA1E;AACD;AACF,KAPD;AAQD;AAED;AACF;AACA;AACA;AACA;;;;;WACE,oBAAW;AACT,UACE,KAAKV,0BAAL,CAAgCC,OAAhC,CAAwCU,MAAxC,KAAmD,CAAnD,IACAL,MAAM,CAACM,MAAP,CAAc,KAAKP,kCAAnB,EAAuDQ,IAAvD,CAA4D,UAACC,CAAD;AAAA,eAAO,CAACA,CAAC,CAACb,OAAF,IAAa,EAAd,EAAkBU,MAAlB,KAA6B,CAApC;AAAA,OAA5D,CAFF,EAGE;AACA,cAAM,IAAII,KAAJ,CACJ,mJADI,CAAN;AAGD;AACF","sourcesContent":["\"use strict\";\n\nexport class Configuration {\n  constructor(options = {}) {\n    this.server = options.server || {\n      nodes: [\n        {\n          applicationId: \"\",\n          host: \"localhost\",\n          routing_key: \"\",\n          port: \"80\",\n          path: \"\",\n          protocol: \"https\",\n        },\n      ],\n    };\n\n    this.server.cacheSearchResultsForSeconds =\n      this.server.cacheSearchResultsForSeconds == null ? 2 * 60 : this.server.cacheSearchResultsForSeconds;\n\n    this.additionalSearchParameters = options.additionalSearchParameters || {};\n\n    this.additionalSearchParameters.queryBy = this.additionalSearchParameters.queryBy || \"\";\n\n    this.additionalSearchParameters.sortBy = this.additionalSearchParameters.sortBy || \"\";\n\n    this.additionalSearchParameters.highlightFullFields =\n      this.additionalSearchParameters.highlightFullFields || this.additionalSearchParameters.queryBy;\n\n    this.geoLocationField = options.geoLocationField || \"_geoloc\";\n\n    this.collectionSpecificSearchParameters = options.collectionSpecificSearchParameters || {};\n\n    Object.keys(this.collectionSpecificSearchParameters).forEach((collection) => {\n      const overrideHighlightFullFields =\n        this.collectionSpecificSearchParameters[collection].highlightFullFields ||\n        this.collectionSpecificSearchParameters[collection].queryBy;\n      if (overrideHighlightFullFields) {\n        this.collectionSpecificSearchParameters[collection].highlightFullFields = overrideHighlightFullFields;\n      }\n    });\n  }\n\n  /*\n   * Either additionalSearchParameters.queryBy needs to be set, or\n   *   All collectionSpecificSearchParameters need to have queryBy\n   *\n   * */\n  validate() {\n    if (\n      this.additionalSearchParameters.queryBy.length === 0 &&\n      Object.values(this.collectionSpecificSearchParameters).some((c) => (c.queryBy || \"\").length === 0)\n    ) {\n      throw new Error(\n        \"Missing parameter: Either additionalSearchParameters.queryBy needs to be set, or all collectionSpecificSearchParameters need to have .queryBy set\"\n      );\n    }\n  }\n}\n"],"file":"Configuration.js"}